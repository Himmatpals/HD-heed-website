<!doctype html>
<html lang="en">
<!-- Favicons / App Icons (HD-only) -->
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=3">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=3">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=3">
<link rel="mask-icon" href="/safari-pinned-tab.svg?v=3" color="#512b8a">
<link rel="manifest" href="/site.webmanifest?v=3">
<meta name="theme-color" content="#512b8a">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HD HeeD — Because we care, we provide HD care</title>
  <meta name="description" content="Registered NDIS provider in NSW. Start a referral or make an enquiry in minutes. Nursing care, personal care, community participation, respite and more." />
  <meta name="theme-color" content="#2563eb" />
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B7MGZCJNJT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-B7MGZCJNJT');
  </script>
  <link rel="icon" href="images/favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --purple:#512b8a; --accent:#ffc107; --bg:#f6f7fb; --ink:#0f172a; --muted:#64748b;
      --brand:#2563eb; --brand2:#22c55e; --ring:#93c5fd; --danger:#ef4444; --enq:#ff5722;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--ink)}
    a{color:var(--brand);text-decoration:none}
    img{max-width:100%;height:auto;display:block}
    .container{max-width:1120px;margin:0 auto;padding:16px}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    a, button { touch-action: manipulation; }

    /* Top contact bar */
    .topbar{background:#0b1220;color:#fff}
    .topbar .inner{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:8px 16px}
    .topbar a{color:#fff;font-weight:700}
    .topbar .small{font-size:13px;color:#cbd5e1}
    .contact-links{display:flex;gap:12px;flex-wrap:wrap}
    .contact-links a{display:inline-flex;gap:6px;align-items:center}

    /* >>> Marquee Ribbon (Right -> Left) <<< */
    .marquee-wrap{
      position:sticky; top:0; z-index:70; background:transparent; padding:6px 0;
    }
    .marquee{
      position:relative; overflow:hidden; width:100%;
    }
    .marquee-track{
      display:flex; gap:28px; align-items:center; white-space:nowrap;
      will-change: transform;
      animation: marquee 68s linear infinite;
    }
    .marquee-item{
      display:inline-flex; align-items:center; gap:10px;
      background:#ecfeff; color:#075985; border:1px solid #bae6fd;
      padding:8px 14px; border-radius:999px; font-weight:900; box-shadow:0 8px 18px rgba(7,89,133,.15);
    }
    .marquee-dot{width:8px;height:8px;border-radius:50%;background:#22c55e}
    @keyframes marquee {
      0%   { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    .marquee:hover .marquee-track{ animation-play-state: paused; }
    @media (max-width: 820px){
      .marquee-track{ animation-duration: 22s; }
    }
    @media (prefers-reduced-motion: reduce){
      .marquee-track{ animation: none; }
    }

    /* Header */
    header.site{position:sticky;top:0;z-index:60;background:#fff;border-bottom:1px solid #e5e7eb}
    header .inner{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 16px}
    .logo{display:flex;gap:10px;align-items:center}
    .logo img{height:44px;width:44px;border-radius:10px;object-fit:cover}
    .nav-links{display:flex;flex-wrap:wrap}
    nav a{margin:0 10px;color:#0f172a;font-weight:700}
    nav a:hover{color:var(--brand)}
    .menu-toggle{display:none;background:#eef2f7;border:1px solid #e5e7eb;border-radius:10px;padding:8px 12px;font-weight:800}
    @media (max-width:820px){
      .menu-toggle{display:inline-block}
      .nav-links{display:none;flex-direction:column;gap:8px;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:8px;position:absolute;top:68px;right:16px}
      .nav-links.open{display:flex}
      nav a{padding:10px 12px;border-radius:8px}
    }

    /* Hero (animated gradients & subtle float) */
    .hero{position:relative;min-height:66vh;border-radius:20px;overflow:hidden;color:#fff;display:grid;place-items:center;margin:16px 0}
    .hero::before{
      content:"";position:absolute;inset:0;background:
        linear-gradient(120deg,rgba(17,24,39,.85),rgba(17,24,39,.85)),
        url('images/hero.jpg') center/cover no-repeat;
    }
    .hero::after{
      /* gentle moving light sweep */
      content:""; position:absolute; inset:-30%; background:
        radial-gradient(60% 30% at 120% 0%, rgba(255,255,255,.12), transparent 60%);
      animation: sweep 8s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes sweep {
      0%,100%{transform: translateX(0) translateY(0)}
      50%{transform: translateX(-6%) translateY(-2%)}
    }
    .hero > .content{position:relative;text-align:center;padding:22px; animation: rise .8s ease-out both}
    @keyframes rise { from {opacity:0; transform: translateY(10px)} to {opacity:1; transform:translateY(0)} }
    .hero h1{font-weight:900;font-size:clamp(24px,6vw,44px);margin:6px 0 10px}
    .hero p{color:#e5e7eb;font-size:clamp(14px,3.5vw,18px);margin:0 0 16px}
    .btn{appearance:none;border:none;padding:14px 18px;border-radius:16px;font-weight:900;cursor:pointer;min-height:44px;transition: transform .18s ease, box-shadow .18s ease}
    .btn:active{transform: translateY(1px)}
    .btn-primary{background:var(--accent);color:#1e1b4b;box-shadow:0 8px 24px rgba(0,0,0,.22)}
    .btn-ghost{background:rgba(255,255,255,.12);color:#fff;border:1px solid rgba(255,255,255,.25)}
    .hero-actions{display:flex;justify-content:center;gap:12px;flex-wrap:wrap}
    .hero-actions .btn{flex:1 1 220px;max-width:320px}
    .enquiry-btn{background:var(--enq);color:#fff;border:none;font-size:1.05rem;padding:16px 22px;box-shadow:0 10px 28px rgba(255,87,34,.35);animation:pulseEnq 1.3s ease-in-out infinite}
    .enquiry-btn:hover{background:#ff7043}
    @keyframes pulseEnq{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
    .chipbar{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:12px}
    .chip{background:rgba(255,255,255,.14);color:#fff;border:1px solid rgba(255,255,255,.25);padding:8px 12px;border-radius:999px;font-size:13px;animation: fadeIn .8s ease both}
    @keyframes fadeIn { from {opacity:0; transform: translateY(6px)} to {opacity:1; transform: translateY(0)} }

    /* Grid & Cards */
    .grid{display:grid;gap:16px}
    .two{grid-template-columns:repeat(2,minmax(0,1fr))}
    .three{grid-template-columns:repeat(3,minmax(0,1fr))}
    @media (max-width:980px){.two,.three{grid-template-columns:1fr}}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:18px;padding:18px;animation: pop .6s ease both}
    @keyframes pop { from {opacity:0; transform: scale(.98)} to {opacity:1; transform: scale(1)} }
    .badge{display:inline-flex;gap:8px;align-items:center;background:#eaf2ff;color:#1e40af;border:1px solid #bfdbfe;padding:6px 10px;border-radius:999px;font-weight:800;font-size:12px}

    .pill{display:inline-flex;gap:8px;align-items:center;padding:12px 14px;border-radius:12px;border:1px solid #e5e7eb;background:#fff;cursor:pointer;min-height:44px;transition: transform .16s}
    .pill:hover{transform: translateY(-1px)}
    .pill[aria-pressed="true"]{border-color:var(--brand);box-shadow:0 0 0 4px #dbeafe}
    .section-title{font-weight:900;font-size:clamp(18px,4.6vw,28px);margin:16px 0 10px}
    .muted{color:var(--muted)}
    .service-card{transition:transform .25s, box-shadow .25s}
    .service-card:hover{transform:translateY(-4px);box-shadow:0 18px 40px rgba(2,6,23,.12)}
    .service-card h3{margin:6px 0 6px;color:var(--purple)}
    .section-image{width:100%;border-radius:14px;object-fit:cover}

    /* Carousel */
    .carousel{display:grid;grid-template-columns:1fr;gap:14px}
    blockquote{margin:0;padding:16px;background:#fff;border:1px solid #e5e7eb;border-radius:14px}
    .stars{color:#f59e0b}

    /* Accordion */
    .accordion .item{border:1px solid #e5e7eb;border-radius:14px;overflow:hidden}
    .accordion summary{list-style:none;cursor:pointer;padding:16px;font-weight:900;background:#fff}
    .accordion summary::-webkit-details-marker{display:none}
    .accordion .content{padding:0 16px 16px;color:#334155;background:#fcfdff}

    /* Sticky CTA */
    .cta-bar{position:sticky;bottom:10px;z-index:40;margin-top:24px;display:flex;justify-content:center;padding:0 16px}
    .cta-bar .inner{display:flex;gap:10px;background:#0b1220;color:#fff;padding:10px;border-radius:999px;box-shadow:0 12px 40px rgba(2,6,23,.35);width:100%;max-width:560px}
    .cta-bar .btn{flex:1 1 50%}

    /* Footer */
    footer{margin:26px 0 10px;color:#64748b;font-size:13px;text-align:center}

    /* Floating referral */
    .floating-referral{
      position:fixed;bottom:20px;right:20px;width:60px;height:60px;background:var(--accent);color:#1e1b4b;
      font-weight:900;font-size:.85rem;display:flex;align-items:center;justify-content:center;border-radius:50%;
      box-shadow:0 16px 40px rgba(0,0,0,.25);z-index:60;text-align:center;line-height:1.1;padding:6px;
      animation: bob 2.2s ease-in-out infinite;
    }
    .floating-referral:hover{background:#ffda44}
    @keyframes bob { 0%,100%{transform: translateY(0)} 50%{transform: translateY(-4px)} }
    @media (min-width:980px){
      .floating-referral{width:3cm;height:3cm;border-radius:14px;right:34px;bottom:34px}
    }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .enquiry-btn,.chip,.hero::after,.card,.floating-referral{animation:none}
    }
  </style>
</head>
<body>
  <!-- Top contact bar -->
  <div class="topbar">
    <div class="inner container">
      <div class="small">Because we care, we provide HD care</div>
      <div class="contact-links">
        <a href="tel:0286305500" aria-label="Call 02 8630 5500">📞 02 8630 5500</a>
        <a href="mailto:info@hdheed.com.au">✉️ info@hdheed.com.au</a>
      </div>
    </div>
  </div>

  <!-- Marquee Ribbon -->
  <div class="marquee-wrap" role="region" aria-label="Registered NDIS Provider ticker">
    <div class="marquee">
      <div class="marquee-track">
        <span class="marquee-item"><span class="marquee-dot" aria-hidden="true"></span> Registered NDIS Provider</span>
        <span class="marquee-item">Clinically led care</span>
        <span class="marquee-item">Person-centred support</span>
        <span class="marquee-item">Serving NSW communities</span>
        <span class="marquee-item">Contact: 02 8630 5500</span>
        <span class="marquee-item">Email: info@hdheed.com.au</span>
        <!-- duplicate for seamless loop -->
        <span class="marquee-item"><span class="marquee-dot" aria-hidden="true"></span> Registered NDIS Provider</span>
        <span class="marquee-item">Clinically led care</span>
        <span class="marquee-item">Person-centred support</span>
        <span class="marquee-item">Serving NSW communities</span>
        <span class="marquee-item">Contact: 02 8630 5500</span>
        <span class="marquee-item">Email: info@hdheed.com.au</span>
      </div>
    </div>
  </div>

  <!-- HEADER -->
  <header class="site" aria-label="Site header">
    <div class="inner container">
      <div class="logo">
        <img src="images/logo.png" alt="HD HeeD logo"/>
        <div>
          <div style="font-weight:900">HD HeeD</div>
          <div class="muted" style="font-size:13px">NDIS Registered • Clinically led • Person-centred</div>
        </div>
      </div>
      <button class="menu-toggle" id="menuToggle" aria-expanded="false" aria-controls="navLinks">Menu ☰</button>
      <nav aria-label="Top navigation">
        <div id="navLinks" class="nav-links">
          <a href="index.html" aria-current="page">Home</a>
          <a href="services.html">Services</a>
          <a href="about.html">About</a>
          <a href="contact.html">Contact</a>
          <a href="blog.html">Blog</a>
        </div>
      </nav>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero" aria-labelledby="h1">
      <div class="content">
        <img src="images/logo.png" alt="" style="width:72px;height:72px;border-radius:18px;object-fit:cover;opacity:.95"/>
        <h1 id="h1">Get the right help in minutes</h1>
        <p>Make an enquiry or start a referral — every step is simple, with “Not sure” options throughout.</p>
        <div class="hero-actions">
          <a class="btn btn-ghost" href="tel:0286305500" aria-label="Call HD HeeD on 02 8630 5500">Call 02 8630 5500</a>
          <!-- Flashy enquiry goes to contact.html -->
          <a class="btn enquiry-btn" href="contact.html" aria-label="Make an Enquiry">Make an Enquiry</a>
          <a class="btn btn-primary" href="referral.html">Start referral</a>
        </div>
        <div class="chipbar">
          <span class="chip">Registered NDIS Provider</span>
          <span class="chip">Clinically led care</span>
          <span class="chip">Person-centred</span>
        </div>
      </div>
    </section>

    <!-- QUICK SELECT + ROUTER + ABOUT -->
    <section class="container" id="router" style="margin-top:12px">
      <div class="grid two">
        <div class="card">
          <div class="badge">Quick selector</div>
          <p class="muted" style="margin:10px 0 8px">Who are you?</p>
          <div class="list" style="display:flex;flex-wrap:wrap;gap:10px">
            <button class="pill" data-role="participant" aria-pressed="false">Participant</button>
            <button class="pill" data-role="carer" aria-pressed="false">Family / Carer</button>
            <button class="pill" data-role="sc" aria-pressed="false">Support Coordinator</button>
            <button class="pill" data-role="hp" aria-pressed="false">Health Professional</button>
          </div>
          <div style="display:flex; gap:10px; margin-top:16px; flex-wrap:wrap">
            <a id="cta-referral" class="btn btn-primary" href="referral.html">Start referral</a>
            <a id="cta-enquiry" class="btn btn-ghost" href="contact.html">Make an enquiry</a>
          </div>

          <hr style="border:none;border-top:1px dashed #e5e7eb;margin:16px 0">
          <div class="badge">20-second router</div>
          <p class="muted" style="margin:10px 0 8px">Answer a few taps; we’ll suggest the best path.</p>
          <div id="qroot"></div>
        </div>

        <div class="card">
          <img class="section-image" src="images/about.jpg" alt="Team at HD HeeD providing support">
          <h2 class="section-title" style="margin-top:12px">About HD HeeD</h2>
          <p class="muted" style="text-align:left">
            Founded by experienced disability and aged care professionals, we provide respectful, person-centred support so people can live independently and confidently.
          </p>
          <div class="list" style="gap:8px;flex-wrap:wrap;display:flex">
            <span class="badge">NDIS Registered</span>
            <span class="badge">Clinically led</span>
            <span class="badge">Warm & reliable</span>
          </div>
          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
            <a class="btn btn-ghost" href="about.html">More about us</a>
            <a class="btn btn-primary" href="services.html">Explore services</a>
          </div>
        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section class="container" style="margin-top:18px">
      <h2 class="section-title">What we can help with</h2>
      <div class="grid three">
        <div class="card service-card">
          <h3>Nursing care at home</h3>
          <p class="muted">Medication, wound care, chronic condition monitoring, and more — delivered at home.</p>
          <a class="btn btn-link" href="nursing-care.html">Nursing care →</a>
        </div>
        <div class="card service-card">
          <h3>Personal & daily living</h3>
          <p class="muted">Showering, dressing, grooming, mobility, toileting, and continence care with dignity.</p>
          <a class="btn btn-link" href="personal-care.html">Personal care →</a>
        </div>
        <div class="card service-card">
          <h3>Community participation</h3>
          <p class="muted">Support to engage in social, cultural, and recreational activities that enrich life.</p>
          <a class="btn btn-link" href="community-participation.html">Community participation →</a>
        </div>
      </div>

      <div class="grid three" style="margin-top:12px">
        <div class="card service-card">
          <h3>Domestic assistance</h3>
          <p class="muted">Cleaning, laundry, and household tasks to keep your space safe and welcoming.</p>
          <a class="btn btn-link" href="domestic-assistance.html">Domestic assistance →</a>
        </div>
        <div class="card service-card">
          <h3>Daily living skills</h3>
          <p class="muted">Skill-building for cooking, budgeting, and other life tasks to support independence.</p>
          <a class="btn btn-link" href="daily-living-skills.html">Daily living skills →</a>
        </div>
        <div class="card service-card">
          <h3>Respite & carer relief</h3>
          <p class="muted">Short-term support to give primary carers a break while care continues.</p>
          <a class="btn btn-link" href="carer-relief.html" style="margin-left:8px">Carer relief →</a>
        </div>
      </div>
    </section>

    <!-- TRUST/CREDENTIALS -->
    <section class="container" style="margin-top:18px">
      <div class="card" style="display:flex;align-items:center;gap:16px;flex-wrap:wrap;justify-content:space-between">
        <div style="display:flex;gap:10px;align-items:center">
          <img src="images/ndis-logo.png" alt="NDIS Registered Provider" style="height:40px"/>
          <img src="images/acnc-logo.png" alt="ACNC Charity Registered" style="height:40px"/>
        </div>
        <div class="muted">Trusted provider • Clinically led • Person-centred</div>
      </div>
    </section>

    <!-- TESTIMONIALS -->
    <section class="container" style="margin-top:18px">
      <h2 class="section-title">What our clients say</h2>
      <div class="carousel" id="carousel" aria-roledescription="carousel">
        <blockquote>
          <div class="stars">★★★★★</div>
          “The nurse from HD HeeD treated mum’s wound with so much care. Process was simple and quick.”
          <div class="muted">— Family carer</div>
        </blockquote>
        <blockquote hidden>
          <div class="stars">★★★★★</div>
          “Easy referral form. They called back within a day and organised personal care supports.”
          <div class="muted">— Support coordinator</div>
        </blockquote>
        <blockquote hidden>
          <div class="stars">★★★★★</div>
          “Respectful, on time, and they listened to what I wanted.”
          <div class="muted">— Participant</div>
        </blockquote>
        <div style="display:flex; gap:8px; margin-top:8px; justify-content:center">
          <button class="btn btn-ghost" id="prev" aria-label="Previous testimonial">‹</button>
          <button class="btn btn-ghost" id="next" aria-label="Next testimonial">›</button>
        </div>
      </div>
    </section>

    <!-- FAQs -->
    <section class="container" style="margin-top:18px">
      <h2 class="section-title">Quick answers</h2>
      <div class="grid two accordion">
        <details class="item">
          <summary>Who can make an enquiry or referral?</summary>
          <div class="content">Participants, family/carers, support coordinators, and health professionals.</div>
        </details>
        <details class="item">
          <summary>Do I need every detail before I refer?</summary>
          <div class="content">No. Our forms include “Not sure” everywhere so you can start now and finalise later.</div>
        </details>
        <details class="item">
          <summary>What services do you cover?</summary>
          <div class="content">Personal care, domestic assistance, community participation, and nursing care at home. See the Services page for details.</div>
        </details>
        <details class="item">
          <summary>How soon will someone get back to me?</summary>
          <div class="content">We aim to respond promptly after your submission and organise next steps with you.</div>
        </details>
      </div>
    </section>

    <!-- CONTACT SLICE (Quick Enquiry uses Formspree) -->
    <section class="container" style="margin-top:18px">
      <div class="card">
        <div class="grid two" style="align-items:center">
          <div>
            <h2 class="section-title" style="margin-top:0">Prefer to talk?</h2>
            <p class="muted" style="text-align:left">Call or email and we’ll guide you.</p>
            <div style="display:flex; flex-wrap:wrap; gap:10px">
              <a class="btn btn-primary" href="tel:0286305500">Call 02 8630 5500</a>
              <a class="btn btn-ghost" href="mailto:info@hdheed.com.au">info@hdheed.com.au</a>
              <a class="btn btn-primary" href="referral.html">Start referral</a>
              <a class="btn btn-ghost" href="contact.html">Make an enquiry</a>
            </div>

            <!-- Quick enquiry (posts to Formspree referral endpoint) -->
            <form id="quickEnquiry" class="grid" style="gap:10px;margin-top:14px;max-width:560px" action="https://formspree.io/f/xvgrkkjn" method="POST">
              <input type="hidden" name="_subject" value="Quick enquiry from HD HeeD home">
              <label class="sr-only" for="qe-msg">Your message</label>
              <textarea id="qe-msg" name="message" placeholder="E.g., wound dressing at home in Parramatta…" required style="width:100%;min-height:110px"></textarea>
              <div class="grid two" style="gap:10px">
                <input id="qe-name" name="name" placeholder="Your name" />
                <input id="qe-email" name="email" placeholder="Your email" type="email" />
              </div>
              <button class="btn btn-primary" type="submit" id="qe-submit">Send quick enquiry</button>
              <div id="qe-status" class="muted" role="status" aria-live="polite"></div>
            </form>
          </div>
          <div>
            <img class="section-image" src="images/contact.jpg" alt="Customer service at HD HeeD">
          </div>
        </div>
      </div>
    </section>

    <!-- Sticky CTA -->
    <div class="cta-bar" aria-hidden="false">
      <div class="inner">
        <a class="btn btn-primary" href="referral.html">Start referral</a>
        <a class="btn btn-ghost" href="contact.html">Enquiry</a>
      </div>
    </div>
  </main>

  <footer>
    © 2025 HD HeeD • <a href="privacy.html">Privacy</a> • <a href="sitemap.xml">Sitemap</a>
  </footer>

  <!-- Floating Make Referral Button -->
  <a href="referral.html" class="floating-referral" aria-label="Make Referral">Refer</a>

  <script>
    // Mobile menu
    const toggle = document.getElementById('menuToggle');
    const navLinks = document.getElementById('navLinks');
    if (toggle){
      toggle.addEventListener('click', ()=>{
        const open = navLinks.classList.toggle('open');
        toggle.setAttribute('aria-expanded', String(open));
      });
    }

    // Role mapping keeps CTAs relevant (adds role to URL)
    const roleMap = {
      participant:{ref:'referral.html', enq:'contact.html'},
      carer:{ref:'referral.html', enq:'contact.html'},
      sc:{ref:'referral.html', enq:'contact.html'},
      hp:{ref:'referral.html', enq:'contact.html'}
    };
    const setRole = (role)=>{
      document.querySelectorAll("[data-role]").forEach(b=>b.setAttribute("aria-pressed", String(b.dataset.role===role)));
      const ref = document.getElementById("cta-referral");
      const enq = document.getElementById("cta-enquiry");
      if (!ref || !enq) return;
      const p = new URLSearchParams({role});
      ref.href = (roleMap[role]?.ref || "referral.html") + "?" + p.toString();
      enq.href = (roleMap[role]?.enq || "contact.html") + "?" + p.toString();
    };
    document.querySelectorAll("[data-role]").forEach(b=> b.addEventListener("click", ()=> setRole(b.dataset.role)));

    // Router (3 small questions)
    const qroot = document.getElementById("qroot");
    const q = [
      {k:"who", q:"Are you a participant, carer, or professional?", opts:["Participant","Carer","Support coordinator","Health professional"]},
      {k:"urgency", q:"How soon do you need support?", opts:["Urgent (24–72h)","Soon (1–2 weeks)","Exploring options"]},
      {k:"info", q:"Do you have details handy?", opts:["Yes","Some","Not sure"]}
    ];
    const answers = {};
    function renderQ(i=0){
      if(!qroot) return;
      if(i>=q.length){ renderResult(); return; }
      const step = q[i];
      qroot.innerHTML = `
        <div class="grid" style="gap:10px">
          <div><strong>${step.q}</strong></div>
          <div class="list" style="display:flex;gap:10px;flex-wrap:wrap">
            ${step.opts.map(o=>`<button class="pill" data-a="${step.k}" data-v="${o}">${o}</button>`).join("")}
          </div>
        </div>`;
      qroot.querySelectorAll("[data-a]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          answers[btn.dataset.a] = btn.dataset.v;
          renderQ(i+1);
        });
      });
    }
    function renderResult(){
      const urgent = (answers.urgency||"").toLowerCase().includes("urgent");
      const infoSome = ["Yes","Some"].includes(answers.info);
      const recommendReferral = urgent || infoSome;
      const params = new URLSearchParams({
        role:(answers.who||"").toLowerCase().replace(" ","_"),
        urgency:answers.urgency||"",
        info:answers.info||""
      }).toString();
      const referUrl = "referral.html?"+params;
      const enqUrl   = "contact.html?"+params;
      qroot.innerHTML = `
        <div class="card" style="background:#f8fafc">
          <div style="display:flex;gap:10px;align-items:center;margin-bottom:8px">
            <img src="images/logo.png" alt="" style="width:28px;height:28px;border-radius:8px;object-fit:cover"/>
            <strong>We recommend ${recommendReferral? "starting a referral" : "making an enquiry"}.</strong>
          </div>
          <p class="muted">You can still choose either path — both include “Not sure” options.</p>
          <div style="display:flex; gap:10px; flex-wrap:wrap">
            <a class="btn btn-primary" href="${referUrl}">Go to referral</a>
            <a class="btn btn-ghost" href="${enqUrl}">Make an enquiry</a>
          </div>
        </div>`;
    }
    renderQ(0);

    // Testimonials carousel
    (function(){
      const prev = document.getElementById("prev");
      const next = document.getElementById("next");
      const nodes = Array.from(document.querySelectorAll("#carousel blockquote"));
      if (!nodes.length || !prev || !next) return;
      let i = 0;
      const show = idx => nodes.forEach((n,j)=> n.hidden = j!==idx);
      prev.addEventListener("click", ()=>{ i = (i-1+nodes.length)%nodes.length; show(i); });
      next.addEventListener("click", ()=>{ i = (i+1)%nodes.length; show(i); });
      setInterval(()=>{ i=(i+1)%nodes.length; show(i); }, 6000);
      show(0);
    })();

    // Quick enquiry to Formspree (with graceful fallback)
    const qeForm = document.getElementById('quickEnquiry');
    const qeStatus = document.getElementById('qe-status');
    if (qeForm){
      qeForm.addEventListener('submit', function(e){
        e.preventDefault();
        const form = e.currentTarget;
        const data = new FormData(form);
        qeStatus.textContent = "Sending…";
        fetch(form.action, { method: "POST", body: data, headers: { "Accept": "application/json" }})
          .then(r => { if (!r.ok) throw new Error("Network"); return r.json(); })
          .then(() => { qeStatus.textContent = "Thanks — we’ve received your enquiry."; form.reset(); })
          .catch(() => {
            const body = encodeURIComponent(
              `Quick enquiry from HD HeeD home:\n\nMessage:\n${data.get('message')}\n\nName: ${data.get('name')}\nEmail: ${data.get('email')}`
            );
            window.location.href = `mailto:info@hdheed.com.au?subject=Quick%20enquiry%20from%20HD%20HeeD&body=${body}`;
            qeStatus.textContent = "Opening your email app…";
          });
      });
    }
  </script>
  <!-- === HD HeeD • ALAN (Simple Voice Intake Assistant) — DROP-IN === -->
<style>
  :root{
    --al-ink:#0c1226; --al-bg:#0b0f1a; --al-panel:#10172a; --al-line:#243153;
    --al-text:#e8edff; --al-accent:#ffc107; --al-soft:#171f3b; --al-good:#1ad1a5;
  }
  /* Greeting popover */
  #alan-greet{position:fixed;right:18px;bottom:18px;z-index:9999;display:none}
  #alan-greet .card{max-width:340px;width:calc(100vw - 36px);background:#0e1428;color:var(--al-text);
    border:1px solid var(--al-line);border-radius:14px;box-shadow:0 18px 60px rgba(0,0,0,.45);padding:14px;font-family:Inter,system-ui}
  #alan-greet h3{margin:0 0 6px 0;font-size:1.05rem}
  #alan-greet p{margin:0 0 10px 0;opacity:.9;font-size:.95rem;line-height:1.5}
  .al-btn{border:0;border-radius:12px;padding:12px 14px;font-weight:900;cursor:pointer}
  .al-btn.primary{background:var(--al-accent);color:#2a2100;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .al-btn.ghost{background:#121a3a;color:#e7ebff;border:1px solid var(--al-line)}
  /* Panel */
  #alan-panel{position:fixed;right:18px;bottom:18px;z-index:10000;display:none}
  #alan-panel .wrap{width:420px;max-width:calc(100vw - 36px);background:linear-gradient(180deg,#10172a,#0b0f1a);
    color:var(--al-text);border:1px solid var(--al-line);border-radius:16px;box-shadow:0 28px 90px rgba(0,0,0,.6);overflow:hidden;font-family:Inter,system-ui}
  .al-head{display:flex;align-items:center;gap:10px;padding:12px;border-bottom:1px solid var(--al-line);background:#0d1428}
  .al-head .avatar{width:34px;height:34px;border-radius:10px;background:linear-gradient(135deg,#9fb5ff,#c2ceff);
    display:grid;place-items:center;color:#1b2560;font-weight:900}
  .al-head .ttl{font-weight:900}
  .al-body{padding:14px;display:grid;gap:12px}
  .al-meta{display:flex;align-items:center;gap:8px;font-size:12px;color:#b7c6ff}
  .al-meter{height:8px;background:#101838;border:1px solid var(--al-line);border-radius:999px;overflow:hidden;flex:1}
  .al-meter>div{height:100%;background:linear-gradient(90deg,#ffd95c,#ffe78f);width:0%}
  .al-q{font-size:1.15rem;font-weight:900;line-height:1.4}
  .al-opts{display:grid;gap:8px}
  .al-chip{border:1px solid var(--al-line);background:linear-gradient(180deg,#121a3a,#0f172f);color:#e7ebff;
    border-radius:12px;padding:12px 14px;text-align:left;cursor:pointer;font-size:1rem}
  .al-chip:hover{box-shadow:0 10px 30px rgba(0,0,0,.25)}
  .al-foot{display:flex;gap:8px;align-items:center;justify-content:space-between;border-top:1px dashed var(--al-line);padding:10px;background:#0b1226}
  .al-pill{border:1px solid var(--al-line);background:#0f1937;border-radius:999px;padding:6px 10px;color:#cfe0ff;font-size:12px}
  .al-mic{border:1px solid var(--al-line);background:#101a3a;color:#e7ebff;border-radius:999px;padding:8px 12px;font-weight:800;cursor:pointer}
  .al-mic.on{background:#13244f}
  .al-close{border:1px solid var(--al-line);background:#121a3a;color:#e7ebff;border-radius:999px;padding:8px 12px;cursor:pointer}
  /* Mobile tweaks */
  @media (max-width:480px){ .al-q{font-size:1.05rem} .al-chip{font-size:.98rem} }
</style>

<div id="alan-greet" aria-live="polite">
  <div class="card">
    <h3>Hi, I’m <strong>ALAN</strong>, your intake assistant.</h3>
    <p>No need to call — <strong>talk to me</strong> and I’ll organise support within a few hours. I’ll ask a few quick questions and take care of the admin.</p>
    <div style="display:flex;gap:8px;flex-wrap:wrap">
      <button id="alan-start" class="al-btn primary" aria-label="Let’s talk">Let’s talk</button>
      <button id="alan-hide" class="al-btn ghost" aria-label="Not now">Not now</button>
    </div>
  </div>
</div>

<div id="alan-panel" role="dialog" aria-label="Chat with ALAN">
  <div class="wrap">
    <div class="al-head">
      <div class="avatar">AL</div>
      <div class="ttl">ALAN — Intake Assistant</div>
      <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
        <span class="al-pill">Voice: <span id="al-voice" style="color:#ffe28f">On</span></span>
        <button id="al-close" class="al-close" aria-label="Close">Close</button>
      </div>
    </div>
    <div class="al-body">
      <div class="al-meta">
        <span id="al-step">Step 1/12</span>
        <div class="al-meter" aria-label="Progress"><div id="al-bar"></div></div>
      </div>
      <div id="al-q" class="al-q">…</div>
      <div id="al-opts" class="al-opts"></div>
      <div id="al-system" style="font-size:12px;color:#a8b6e8"></div>
    </div>
    <div class="al-foot">
      <div class="al-pill">Say A, B, C, D or “Not sure”</div>
      <div style="display:flex;gap:8px;align-items:center">
        <button id="al-mic" class="al-mic" aria-pressed="false">🎤 Listen</button>
        <button id="al-restart" class="al-mic">↻ Restart</button>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  /* ===== Config ===== */
  const FS_ENDPOINT = "https://formspree.io/f/xvgrkkjn"; // your Formspree form (JSON post)
  const SITE_EMAIL = "info@hdheed.com.au";
  const SITE_PHONE = "02 8630 5500";

  /* ===== State ===== */
  const SKEY='hdheed_alan_simple_v1';
  let S = {
    i:0, // step index
    caller:null, consent:null, service:null, mgmt:null, dates:null, cat:null,
    risks:{beh:null, med:null, int:null}, urgency:null, contacts:null, rostering:null,
    name:null, email:null, phone:null, route:null, notes:[]
  };
  try{ const prev=JSON.parse(localStorage.getItem(SKEY)||'null'); if(prev) S=prev; }catch{}
  const save=()=>{ try{ localStorage.setItem(SKEY, JSON.stringify(S)); }catch{} };

  /* ===== DOM ===== */
  const greet = document.getElementById('alan-greet');
  const startBtn = document.getElementById('alan-start');
  const hideBtn = document.getElementById('alan-hide');
  const panel = document.getElementById('alan-panel');
  const closeBtn = document.getElementById('al-close');
  const qEl = document.getElementById('al-q');
  const optsEl = document.getElementById('al-opts');
  const stepEl = document.getElementById('al-step');
  const barEl = document.getElementById('al-bar');
  const sysEl = document.getElementById('al-system');
  const micBtn = document.getElementById('al-mic');
  const restartBtn = document.getElementById('al-restart');
  const voiceBadge = document.getElementById('al-voice');

  /* ===== Voice (TTS + SR) ===== */
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  let recog = null, listening = false, ttsOn = true;

  if (SR){
    recog = new SR(); recog.lang='en-AU'; recog.interimResults=false; recog.continuous=false;
    recog.onresult = (e)=>{ const t=e.results[0][0].transcript; handleSpeech(t); };
    recog.onend = ()=>{ listening=false; micBtn.classList.remove('on'); micBtn.setAttribute('aria-pressed','false'); };
  } else {
    voiceBadge.textContent='Off';
  }

  function speak(text){
    if (!ttsOn || !('speechSynthesis' in window)) return;
    const u = new SpeechSynthesisUtterance(String(text));
    u.lang='en-AU';
    window.speechSynthesis.cancel(); window.speechSynthesis.speak(u);
  }
  function listen(){
    if (!recog){ return; }
    try{ listening=true; micBtn.classList.add('on'); micBtn.setAttribute('aria-pressed','true'); recog.start(); }catch{}
  }

  /* ===== Flow ===== */
  const NS = (t='Not sure — please guide me')=>({k:'NS',t,apply:()=>{}});
  const o = (k,t,apply=()=>{})=>({k,t,apply});

  function steps(){
    return [
      {id:'caller', q:"Who am I speaking with today?",
        opts:[
          o('A','Participant',()=>S.caller='Participant'),
          o('B','Family / Carer',()=>S.caller='Carer'),
          o('C','Support Coordinator',()=>S.caller='Support Coordinator'),
          o('D','Plan Manager',()=>S.caller='Plan Manager'),
          NS()
        ]},
      {id:'consent', q:"May I note verbal consent to collect details and, if needed, contact your SC or Plan Manager?",
        opts:[
          o('A','Yes',()=>S.consent='Yes'),
          o('B','Not yet',()=>S.consent='Not yet'),
          o('C','Not sure',()=>S.consent='Not sure'),
          o('D','No',()=>S.consent='No'),
          NS()
        ]},
      {id:'service', q:"Which support fits best now?",
        opts:[
          o('A','Personal care',()=>{S.service='Personal care';S.cat='Core – Assistance with Daily Life';}),
          o('B','Community participation',()=>{S.service='Community participation';S.cat='Core – Social & Community Participation';}),
          o('C','Nursing care',()=>{S.service='Nursing care';S.cat='Core – Community Nursing Care';}),
          o('D','Daily living skills',()=>{S.service='Daily living skills';S.cat='Capacity – Improved Daily Living';}),
          NS()
        ]},
      {id:'mgmt', q:"How is the NDIS plan managed?",
        opts:[
          o('A','NDIA-managed',()=>S.mgmt='NDIA-managed'),
          o('B','Plan-managed',()=>S.mgmt='Plan-managed'),
          o('C','Self-managed',()=>S.mgmt='Self-managed'),
          o('D','Not sure',()=>S.mgmt='Not sure'),
          NS()
        ]},
      {id:'dates', q:"Do you know the plan dates?",
        opts:[
          o('A','Active',()=>S.dates='Active'),
          o('B','Expiring soon',()=>S.dates='Expiring soon'),
          o('C','Not sure',()=>S.dates='Not sure'),
          o('D','Expired',()=>S.dates='Expired'),
          NS()
        ]},
      {id:'risk_beh', q:"Any behaviours of concern or a Behaviour Support Plan?",
        opts:[
          o('A','Yes',()=>S.risks.beh=true),
          o('B','No',()=>S.risks.beh=false),
          o('C','Not sure',()=>S.risks.beh=null),
          o('D','Prefer not to say',()=>S.risks.beh=null),
          NS()
        ]},
      {id:'risk_med', q:"Any clinical needs like medication or wound care?",
        opts:[
          o('A','Yes',()=>S.risks.med=true),
          o('B','No',()=>S.risks.med=false),
          o('C','Not sure',()=>S.risks.med=null),
          o('D','Prefer not to say',()=>S.risks.med=null),
          NS()
        ]},
      {id:'risk_int', q:"Would you like an interpreter?",
        opts:[
          o('A','Yes',()=>S.risks.int=true),
          o('B','No',()=>S.risks.int=false),
          o('C','Not sure',()=>S.risks.int=null),
          o('D','Prefer not to say',()=>S.risks.int=null),
          NS()
        ]},
      {id:'urgency', q:"When would you like to start?",
        opts:[
          o('A','Urgent (24–72h)',()=>S.urgency='Urgent'),
          o('B','Soon (1–2 weeks)',()=>S.urgency='Soon'),
          o('C','Exploring options',()=>S.urgency='Exploring'),
          o('D','Not sure',()=>S.urgency='Not sure'),
          NS()
        ]},
      {id:'contacts', q:"Do you have your Support Coordinator or Plan Manager’s contact?",
        opts:[
          o('A','Yes — I have it now',()=>S.contacts='Have details now'),
          o('B','Not with me — send a template',()=>S.contacts='Will forward template'),
          o('C','No SC/PM / Not applicable',()=>S.contacts='No SC/PM'),
          NS()
        ]},
      {id:'rostering', q:"What windows suit you?",
        opts:[
          o('A','Weekday mornings',()=>S.rostering='Weekday AM'),
          o('B','Weekday afternoons',()=>S.rostering='Weekday PM'),
          o('C','Evenings',()=>S.rostering='Evenings'),
          o('D','Weekends only',()=>S.rostering='Weekends'),
          NS('Flexible')
        ]},
      {id:'contact', q:"Please say or type your first name, email and phone (initials are fine).",
        opts:[ NS('I’ll share later') ]},
      {id:'final', q:"Send this now as a Referral (A) or as a General Enquiry (B)?",
        opts:[
          o('A','Referral',()=>S.route='Referral'),
          o('B','Enquiry',()=>S.route='Enquiry'),
          o('C','Review first',()=>S.route='Review'),
          o('D','Save only',()=>S.route='Save'),
          NS()
        ]}
    ];
  }

  function render(){
    const list = steps();
    const total = list.length;
    const step = list[S.i] || list[total-1];
    stepEl.textContent = `Step ${Math.min(S.i+1,total)}/${total}`;
    barEl.style.width = Math.round(((S.i)/(total-1))*100) + '%';
    qEl.textContent = step.q;
    optsEl.innerHTML = '';
    step.opts.forEach(opt=>{
      const b = document.createElement('button');
      b.className='al-chip';
      b.textContent = `${opt.k}) ${opt.t}`;
      b.addEventListener('click', ()=> choose(opt));
      optsEl.appendChild(b);
    });
    save();
    // speak it
    speak(step.q);
  }

  function choose(opt){
    // special free-entry on contact step
    if (steps()[S.i].id==='contact' && opt.k==='NS'){
      sysEl.innerHTML = 'You can also speak or type like: <code>Mat, mat@example.com, 0400 000 000</code>';
      speak('You can say your name, email and phone when you are ready.');
      listen(); // wait for details
      return;
    }
    if (typeof opt.apply==='function') opt.apply();
    save();
    next();
  }

  function next(){
    if (steps()[S.i].id==='final'){
      renderSummary();
      if (S.route==='Referral' || S.route==='Enquiry'){ submit(); }
      return;
    }
    S.i = Math.min(S.i+1, steps().length-1); save(); render(); if (recog) listen();
  }

  function handleSpeech(text){
    const t = (text||'').trim();
    // on contact step — try to parse details
    if (steps()[S.i].id==='contact'){
      const email = (t.match(/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i)||[])[0];
      const phone = (t.match(/(\+?\d[\d\s\-]{6,}\d)/)||[])[0];
      const name = t.replace(email||'','').replace(phone||'','').replace(/[,;|]/g,' ').trim();
      if (email) S.email=email;
      if (phone) S.phone=phone;
      if (name) S.name=name;
      save();
      sysEl.textContent = 'Thanks — I’ve recorded your contact details.';
      next();
      return;
    }
    // map speech to a choice
    const up = t.toUpperCase();
    const tryKeys = ['A','B','C','D','NS'];
    let pick = null;
    if (tryKeys.includes(up)) pick=up;
    else if (/participant|client/i.test(t)) pick='A';
    else if (/carer|family/i.test(t)) pick='B';
    else if (/support\s*co/i.test(t)) pick='C';
    else if (/plan\s*manager|pm\b/i.test(t)) pick='D';
    else if (/not sure|unsure|don.?t know|flexible/i.test(t)) pick='NS';

    const step = steps()[S.i];
    const chosen = step.opts.find(x=>x.k===pick) || step.opts.find(x=>x.k==='NS');
    if (chosen){ choose(chosen); }
    else { S.notes.push(t); save(); sysEl.textContent='Noted. You can answer A, B, C, D or say Not sure.'; if (recog) listen(); }
  }

  function renderSummary(){
    const yn=v=>v===true?'Yes':v===false?'No':(v||'—');
    const lines = [
      `Caller: ${S.caller||'—'}`,
      `Consent: ${S.consent||'—'}`,
      `Service: ${S.service||'—'}`,
      `Mgmt: ${S.mgmt||'—'}`,
      `Dates: ${S.dates||'—'}`,
      `Category: ${S.cat||'—'}`,
      `Risks: Beh ${yn(S.risks.beh)} • Med ${yn(S.risks.med)} • Int ${yn(S.risks.int)}`,
      `Urgency: ${S.urgency||'—'}`,
      `SC/PM: ${S.contacts||'—'}`,
      `Rostering: ${S.rostering||'—'}`,
      `Name: ${S.name||'—'} • Email: ${S.email||'—'} • Phone: ${S.phone||'—'}`
    ];
    qEl.textContent = "Great — here’s a quick summary. I’ll send this to our team.";
    optsEl.innerHTML = '<div class="al-chip" style="cursor:default;white-space:pre-line">'+lines.join('\n')+'</div>';
    speak("Thanks. I’ll send this to our team now.");
  }

  async function submit(){
    const payload = {
      _subject:`HD HeeD Website – ${S.route} via ALAN (simple)`,
      source:"index-alan-simple",
      route:S.route, caller:S.caller, consent:S.consent, service:S.service,
      plan_mgmt:S.mgmt, plan_dates:S.dates, category:S.cat,
      risk_behaviours:S.risks.beh, risk_medical:S.risks.med, risk_interpreter:S.risks.int,
      urgency:S.urgency, contacts:S.contacts, rostering:S.rostering,
      name:S.name, email:S.email, phone:S.phone,
      notes:(S.notes||[]).join('\n'), timestamp:new Date().toISOString()
    };
    try{
      const r = await fetch(FS_ENDPOINT, {
        method:"POST",
        headers:{ "Content-Type":"application/json", "Accept":"application/json" },
        body: JSON.stringify(payload)
      });
      const data = await r.json();
      if (r.ok){
        sysEl.innerHTML = `All done — we’ll contact you from <a href="mailto:${SITE_EMAIL}" style="color:#ffd95c">${SITE_EMAIL}</a> or ${SITE_PHONE}.`;
        speak("All done. We’ll contact you shortly.");
      } else { throw new Error(data?.error || "Submission failed"); }
    }catch(e){
      sysEl.innerHTML = `Couldn’t send right now. Please email <a href="mailto:${SITE_EMAIL}" style="color:#ffd95c">${SITE_EMAIL}</a> or call ${SITE_PHONE}. <button id="al-dl" class="al-mic" style="margin-left:6px">Download summary</button>`;
      speak("I couldn’t send right now. You can download your summary and email it to us.");
      const dlBtn = document.getElementById('al-dl');
      if (dlBtn){
        dlBtn.addEventListener('click', ()=>{
          const blob = new Blob([JSON.stringify(payload,null,2)], {type:"application/json"});
          const a=Object.assign(document.createElement('a'),{href:URL.createObjectURL(blob),download:'hdheed-intake.json'});
          document.body.appendChild(a); a.click(); a.remove();
        });
      }
    }
  }

  /* ===== Open/Close/Greet ===== */
  function openPanel(){
    greet.style.display='none';
    panel.style.display='block';
    S.i=0; save(); render();
    if (recog) listen();
  }
  function closePanel(){ panel.style.display='none'; try{ window.speechSynthesis.cancel(); }catch{} }

  // Greeting popup after short delay (first visit per session)
  if (!sessionStorage.getItem('alan_greeted')){
    setTimeout(()=>{ greet.style.display='block'; sessionStorage.setItem('alan_greeted','1'); }, 1200);
  }

  // Hooks
  startBtn.addEventListener('click', openPanel);
  hideBtn.addEventListener('click', ()=>{ greet.style.display='none'; });
  closeBtn.addEventListener('click', closePanel);
  micBtn.addEventListener('click', ()=>{ if (!recog){ alert('Voice not supported in this browser.'); return; } listen(); });
  restartBtn.addEventListener('click', ()=>{ localStorage.removeItem(SKEY); S={i:0,caller:null,consent:null,service:null,mgmt:null,dates:null,cat:null,risks:{beh:null,med:null,int:null},urgency:null,contacts:null,rostering:null,name:null,email:null,phone:null,route:null,notes:[]}; save(); render(); if (recog) listen(); });

  // Optional global opener: window.ALAN.open()
  window.ALAN = { open: openPanel };

})();
</script>
<!-- === /ALAN (Simple Voice Intake Assistant) === -->

