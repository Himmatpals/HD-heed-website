<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HD HeeD — Participant’s Support Plan (Smart)</title>
<meta name="color-scheme" content="light only" />
<style>
  :root{
    --brand:#6a1b9a; --accent:#8e24aa; --ink:#1a1a1a; --muted:#666c7a;
    --line:#e6e6ef; --light:#f7f4fb; --panel:#ffffff; --warn:#b00020; --softred:#ffe9ed;
    --ok:#20a464; --okbg:#e8f7f0;
  }
  html,body{margin:0;padding:0;background:var(--light);color:var(--ink);font:15px/1.58 "Inter", Segoe UI, Roboto, Arial, sans-serif}
  .container{max-width:1040px;margin:24px auto;padding:0 16px}
  header.hero{background:linear-gradient(92deg,var(--brand),var(--accent));color:#fff;padding:20px 0;box-shadow:0 2px 10px rgba(0,0,0,.1)}
  .hero-wrap{display:flex;align-items:center;gap:16px}
  .hero img{height:72px;width:auto;border-radius:12px;background:#fff;object-fit:contain;box-shadow:0 2px 10px rgba(0,0,0,.15)}
  .hero h1{margin:0;font-size:26px;font-weight:800}
  .hero p{margin:4px 0 0;font-size:14px;opacity:.95}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:22px;box-shadow:0 8px 28px rgba(20,16,38,.06);margin:18px 0}
  h2.section{margin:0 0 14px;font-size:20px;font-weight:800;color:var(--brand);display:flex;align-items:center;gap:10px}
  h3.sub{margin:16px 0 8px;font-size:16px;font-weight:700;color:var(--accent)}
  p,li{color:var(--ink)} ul{margin:6px 0 12px 22px}
  label{display:block;font-weight:700;margin:10px 0 6px}
  input[type="text"],input[type="date"],input[type="email"],input[type="tel"],select,textarea{
    width:100%;padding:11px 12px;border:1px solid var(--line);border-radius:10px;background:#fff;font-size:15px;
    transition:border .2s, box-shadow .2s, background-color .2s
  }
  textarea{min-height:96px;resize:vertical}
  .grid{display:grid;gap:14px}
  .grid-2{grid-template-columns:1fr 1fr}
  .grid-3{grid-template-columns:1fr 1fr 1fr}
  .ticks{display:flex;gap:18px;flex-wrap:wrap;margin:6px 0}
  .ticks label{display:flex;align-items:center;gap:8px;font-weight:600}
  .ticks input{transform:scale(1.1)}
  .hint{font-size:12.5px;color:var(--muted);margin-top:4px}
  .mini{font-size:12.5px;color:var(--muted)}
  .icon{width:34px;height:34px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;background:#efe6f6;border:1px solid #eadcf8}
  .shade-lilac{background:#fbf7ff;border:1px solid #eadcf8}
  .shade-blue{background:#f7fbff;border:1px solid #d8e9fb}
  .shade-green{background:#f9fff9;border:1px solid #d7f2da}
  .shade-rose{background:#fff8fb;border:1px solid #f6cfe0}
  .shade-amber{background:#fffef7;border:1px solid #f3e6b3}
  .shade-slate{background:#fffefe;border:1px solid #e9e9e9}
  table{border-collapse:collapse;width:100%;margin-top:8px}
  th,td{border:1px solid var(--line);padding:10px;vertical-align:top}
  th{background:#f3e9f7;color:#3c096c;font-weight:800}

  /* Required logic */
  .req{border-color:var(--warn)!important;background:var(--softred)}
  .ok{border-color:var(--line)!important;background:#fff}
  .suggested{background:#fff8f1;border-color:#f3d3a6}
  .review-ok{background:var(--okbg)!important;border-color:var(--ok)!important}

  .actions{display:flex;gap:10px;justify-content:flex-end;margin:10px 0 22px}
  .btn{appearance:none;border:none;border-radius:12px;padding:11px 16px;font-weight:800;cursor:pointer}
  .btn.primary{background:var(--brand);color:#fff}
  .btn.ghost{background:#fff;border:1px solid var(--line);color:var(--brand)}
  .btn.primary:hover{background:var(--accent)}
  .row-between{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
  .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);padding:8px 10px;border-radius:999px;background:#fff}
  .pill input{transform:scale(1.05)}
  @media print{
    body{background:#fff}.actions{display:none}.card{box-shadow:none;border:1px solid #ddd;border-radius:10px;break-inside:avoid}header.hero{box-shadow:none}
  }
</style>
</head>
<body>
<header class="hero">
  <div class="container hero-wrap">
    <img src="hd heed.jpg" alt="HD HeeD logo">
    <div>
      <h1>Participant’s Support Plan — Copy / Record (Smart)</h1>
      <p>HD HeeD Pty Ltd • Registered NDIS Provider • Phone: 02 8630 5500 • Email: info@hdheed.com.au</p>
    </div>
  </div>
</header>

<div class="container actions">
  <button class="btn ghost" id="applyDefaults">Apply HD HeeD Defaults</button>
  <button class="btn primary" onclick="window.print()">Print / Save as PDF</button>
</div>

<div class="container">

  <!-- Quick Defaults -->
  <section class="card shade-slate" id="sec_defaults">
    <div class="row-between">
      <h2 class="section">
        <span class="icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#424242" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"/>
          </svg>
        </span>
        Smart Suggestions & Defaults
      </h2>
      <label class="pill"><input type="checkbox" id="acceptAll"> Mark all suggestions reviewed</label>
    </div>
    <p class="mini">Click “Apply HD HeeD Defaults” above anytime — it will prefill common phrases and storage paths (you can still edit them). Fields in <b style="color:#b00020">red</b> need your review; they turn green when you tick a section’s “reviewed” toggle or edit the text.</p>
  </section>

  <!-- Plan linkage / storage -->
  <section class="card shade-lilac" id="sec_attach">
    <div class="row-between">
      <h2 class="section">
        <span class="icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#6a1b9a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="16" rx="2"/><path d="M7 8h10M7 12h10M7 16h6"/>
          </svg>
        </span>
        Support Plan – Attachment / Storage
      </h2>
      <label class="pill"><input type="checkbox" data-review="sec_attach"> Mark section reviewed</label>
    </div>
    <div class="grid grid-2">
      <div>
        <label>Attachment status</label>
        <select id="sp_attach" class="req suggested">
          <option value="">Select</option>
          <option>Copy attached to this record</option>
          <option selected>Stored elsewhere (specify location below)</option>
        </select>
        <div class="hint">If stored elsewhere, point to the exact file path or folder so auditors can locate it.</div>
      </div>
      <div>
        <label>Storage location / path</label>
        <input type="text" id="sp_storage" class="req suggested" placeholder="ShiftCare › Files › &lt;Participant&gt; › Plans › YYYY-MM-DD.pdf"
               value="ShiftCare › Files › <ParticipantName> › Plans › 2025-09-01 Support Plan.pdf">
        <div class="hint">Use a consistent naming pattern: <i>YYYY-MM-DD Support Plan.pdf</i></div>
      </div>
    </div>
    <div>
      <label>Notes (version, who uploaded)</label>
      <input type="text" class="suggested" value="Version 1.0, uploaded by RN on 2025-09-01; verified readable.">
    </div>
  </section>

  <!-- Participant details -->
  <section class="card shade-blue" id="sec_participant">
    <div class="row-between">
      <h2 class="section">
        <span class="icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#145da0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="9" cy="7" r="4"/><path d="M17 11a4 4 0 1 0-4-4"/><path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"/>
          </svg>
        </span>
        Participant Details
      </h2>
      <label class="pill"><input type="checkbox" data-review="sec_participant"> Mark section reviewed</label>
    </div>
    <div class="grid grid-3">
      <div><label>Participant name</label><input class="req" type="text" placeholder="Full name"></div>
      <div><label>NDIS number</label><input class="req" type="text" placeholder="4300 123 456"></div>
      <div><label>Date of birth</label><input class="req" type="date"></div>
    </div>
    <div class="grid grid-3">
      <div><label>Primary contact</label><input class="req suggested" value="Self (Participant)"></div>
      <div><label>Phone</label><input class="req" type="tel" placeholder="04xx xxx xxx"></div>
      <div><label>Email</label><input class="req" type="email" placeholder="name@example.com"></div>
    </div>
    <div class="grid grid-2">
      <div><label>Address</label><input class="req" type="text" placeholder="Street, Suburb, State, Postcode"></div>
      <div>
        <label>Funding management</label>
        <div class="ticks">
          <label><input type="checkbox"> Plan-managed</label>
          <label><input type="checkbox"> Self-managed</label>
          <label><input type="checkbox"> NDIA-managed</label>
        </div>
      </div>
    </div>
  </section>

  <!-- Plan overview -->
  <section class="card shade-green" id="sec_overview">
    <div class="row-between">
      <h2 class="section">
        <span class="icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1b8a3a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 3h18v4H3z"/><path d="M8 7v14"/><path d="M3 11h18"/><path d="M3 16h18"/>
          </svg>
        </span>
        Plan Overview
      </h2>
      <label class="pill"><input type="checkbox" data-review="sec_overview"> Mark section reviewed</label>
    </div>
    <div class="grid grid-3">
      <div><label>Plan start date</label><input class="req" type="date"></div>
      <div><label>Plan end date</label><input class="req" type="date"></div>
      <div><label>Plan version / reference</label><input class="req suggested" value="2025 Plan v1"></div>
    </div>
    <label>Participant goals (as stated in plan)</label>
    <textarea class="req suggested" data-dl="goals" placeholder="Goals…">Improve community access and daily living skills; maintain health and safety at home; build independence with medication and wound care routines.</textarea>
    <div class="hint">Edit to match the plan exactly; add goal numbers if present.</div>
    <label>Strengths, preferences, communication</label>
    <textarea class="req suggested">Strengths: friendly, motivated, follows routines. Preferences: morning visits (Mon–Fri), female nurse preferred. Communication: plain language; confirm understanding; interpreter not required.</textarea>
  </section>

  <!-- Supports summary -->
  <section class="card shade-rose" id="sec_supports">
    <div class="row-between">
      <h2 class="section">
        <span class="icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#b00059" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8z"/>
          </svg>
        </span>
        Supports & Budget Summary
      </h2>
      <label class="pill"><input type="checkbox" data-review="sec_supports"> Mark section reviewed</label>
    </div>
    <table>
      <thead>
        <tr>
          <th style="width:36px">#</th>
          <th>Support category / item</th>
          <th>Outcome/goal link</th>
          <th>Provider(s)</th>
          <th>Frequency / volume</th>
          <th>Budget (if applicable)</th>
        </tr>
      </thead>
      <tbody id="tbl_supports">
        <tr>
          <td>1</td>
          <td><input class="req suggested" list="dl_supports" value="Community Nursing (0104) — Wound care"></td>
          <td><input class="req suggested" value="Supports Goal: maintain health & safety (wound management)"></td>
          <td><input class="req suggested" value="HD HeeD Pty Ltd"></td>
          <td><input class="req suggested" value="RN visit 2×/week; telehealth 1×/month"></td>
          <td><input class="req suggested" value="Per NDIS price limits (hourly)"></td>
        </tr>
      </tbody>
    </table>
    <div class="actions"><button class="btn ghost" type="button" onclick="addRow('tbl_supports')">Add support</button></div>
    <p class="hint">Tip: keep phrasing consistent across clients; adjust only what changes.</p>
  </section>

  <!-- Risks & safeguards -->
  <section class="card shade-amber" id="sec_risk">
    <div class="row-between">
      <h2 class="section">
        <span class="icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#9c6f00" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M9 12l2 2 4-4"/>
          </svg>
        </span>
        Risks, Safeguards & Adjustments
      </h2>
      <label class="pill"><input type="checkbox" data-review="sec_risk"> Mark section reviewed</label>
    </div>
    <label>Identified risks and mitigation strategies</label>
    <textarea class="req suggested">Falls risk—OT home safety; shower chair; non-slip mats. Medication safety—RN blister pack check; locked storage. Wound infection—aseptic technique; escalate to GP on signs (pain ↑, odour, exudate, fever).</textarea>
    <label>Reasonable adjustments / accessibility needs</label>
    <textarea class="req suggested">Plain-language explanations; extra time for decisions; quiet environment during care; reminder SMS day prior to visits.</textarea>
    <div class="ticks">
      <label><input type="checkbox" class="suggested"> Personal Emergency Preparation Plan completed and filed</label>
      <label><input type="checkbox" class="suggested"> Incident Management & complaints info provided</label>
      <label><input type="checkbox" class="suggested"> Consent & information sharing discussed</label>
    </div>
  </section>

  <!-- Coordination & contacts -->
  <section class="card shade-slate" id="sec_contacts">
    <div class="row-between">
      <h2 class="section">
        <span class="icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#424242" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 12h-4l-3 9L9 3 6 12H2"/><path d="M2 7l10 6L22 7"/>
          </svg>
        </span>
        Key Contacts & Coordination
      </h2>
      <label class="pill"><input type="checkbox" data-review="sec_contacts"> Mark section reviewed</label>
    </div>
    <div class="grid grid-3">
      <div><label>Support Coordinator</label><input type="text" class="req" placeholder="Name / Org"></div>
      <div><label>Phone</label><input type="tel" class="req" placeholder="Phone"></div>
      <div><label>Email</label><input type="email" class="req" placeholder="Email"></div>
    </div>
    <div class="grid grid-3">
      <div><label>Plan Manager (if any)</label><input type="text" placeholder="Name / Org"></div>
      <div><label>Phone</label><input type="tel" placeholder="Phone"></div>
      <div><label>Email</label><input type="email" placeholder="Email"></div>
    </div>
    <label>Other providers & roles</label>
    <textarea class="req suggested">GP: Dr ______ (Clinic, Phone). Pharmacy: ______ (Phone). Allied health: Physio / OT / SP as per plan. Behaviour Support Practitioner (if any): ______.</textarea>
  </section>

  <!-- Review & signatures -->
  <section class="card shade-green" id="sec_review">
    <div class="row-between">
      <h2 class="section">
        <span class="icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#1b8a3a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 3l5 5-5 5"/><path d="M8 21l-5-5 5-5"/><path d="M20 8H4"/>
          </svg>
        </span>
        Review, Updates & Sign-off
      </h2>
      <label class="pill"><input type="checkbox" data-review="sec_review"> Mark section reviewed</label>
    </div>
    <div class="grid grid-3">
      <div><label>Date prepared</label><input class="req" type="date"></div>
      <div><label>Next review due</label><input class="req suggested" value="2026-03-01" type="date"></div>
      <div><label>Version</label><input class="req suggested" value="v1.0"></div>
    </div>
    <div class="grid grid-2">
      <div><label>Participant / Representative name</label><input class="req" type="text" placeholder="Name"></div>
      <div><label>Signature date</label><input class="req" type="date"></div>
    </div>
    <div class="grid grid-2">
      <div><label>HD HeeD authorised person</label><input class="req suggested" value="HD HeeD Pty Ltd"></div>
      <div><label>Signature date</label><input class="req" type="date"></div>
    </div>
  </section>

  <div class="actions">
    <button class="btn ghost" id="applyDefaults2">Apply HD HeeD Defaults</button>
    <button class="btn primary" onclick="window.print()">Print / Save as PDF</button>
  </div>
</div>

<!-- Reusable suggestion lists -->
<datalist id="dl_supports">
  <option>Community Nursing (0104) — Wound care</option>
  <option>Medication management — RN administration</option>
  <option>Enteral feeding support</option>
  <option>Catheter care & monitoring</option>
  <option>Diabetes education & monitoring</option>
</datalist>
<datalist id="goals">
  <option>Maintain health and safety at home</option>
  <option>Increase independence with personal activities</option>
  <option>Build capacity in community participation</option>
</datalist>

<script>
  // ========= SMART REQUIRED LOGIC =========
  const requiredSel = 'input.req, textarea.req, select.req';
  function setState(el){
    const val=(el.value||'').trim();
    if(!val){ el.classList.add('req'); el.classList.remove('ok','review-ok'); return; }
    // If suggested and unchanged, keep req until reviewed:
    if(el.classList.contains('suggested') && !el.dataset.edited && !el.classList.contains('review-ok')){
      el.classList.add('req'); el.classList.remove('ok'); return;
    }
    el.classList.remove('req'); el.classList.add('ok');
  }
  function bind(el){
    ['input','change','blur'].forEach(ev=>{
      el.addEventListener(ev, ()=>{
        el.dataset.edited = "1";
        setState(el);
      });
    });
  }
  function init(){
    document.querySelectorAll(requiredSel).forEach(el=>{ setState(el); bind(el); });
    // Section review toggles
    document.querySelectorAll('[data-review]').forEach(cb=>{
      cb.addEventListener('change', ()=>{
        const secId = cb.getAttribute('data-review');
        const fields = document.querySelectorAll('#'+secId+' .suggested');
        fields.forEach(f=>{
          f.classList.add('review-ok'); f.classList.remove('req'); f.dataset.edited="1";
        });
      });
    });
    // Global accept
    const acceptAll=document.getElementById('acceptAll');
    if(acceptAll){ acceptAll.addEventListener('change',()=>{
      document.querySelectorAll('.suggested').forEach(f=>{
        f.classList.add('review-ok'); f.classList.remove('req'); f.dataset.edited="1";
      });
    });}
  }
  document.addEventListener('DOMContentLoaded', init);

  // ========= DEFAULTS ENGINE =========
  const DEFAULTS={
    org:{
      provider:"HD HeeD Pty Ltd",
      phone:"02 8630 5500",
      email:"info@hdheed.com.au",
      storageBase:"ShiftCare › Files › <ParticipantName> ›"
    },
    phrases:{
      goals:"Improve community access and daily living skills; maintain health and safety at home; build independence with medication and wound care routines.",
      strengths:"Strengths: friendly, motivated, follows routines. Preferences: morning visits (Mon–Fri), female nurse preferred. Communication: plain language; confirm understanding; interpreter not required.",
      risk:"Falls risk—OT home safety; shower chair; non-slip mats. Medication safety—RN blister pack check; locked storage. Wound infection—aseptic technique; escalate to GP on signs (pain ↑, odour, exudate, fever).",
      adjustments:"Plain-language explanations; extra time for decisions; quiet environment during care; reminder SMS day prior to visits.",
      supportRow:{
        item:"Community Nursing (0104) — Wound care",
        outcome:"Supports Goal: maintain health & safety (wound management)",
        provider:"HD HeeD Pty Ltd",
        freq:"RN visit 2×/week; telehealth 1×/month",
        budget:"Per NDIS price limits (hourly)"
      }
    }
  };
  function applyDefaults(){
    const s = (sel,v)=>{const el=document.querySelector(sel); if(!el) return; el.value=v; el.classList.add('suggested'); el.dataset.edited=""; setState(el);};
    // Storage
    applyIf('#sp_attach', 'Stored elsewhere (specify location below)');
    applyIf('#sp_storage', `${DEFAULTS.org.storageBase} Plans › 2025-09-01 Support Plan.pdf`);
    // Participant defaults
    applyIf('#sec_participant input[placeholder="Full name"]','');
    // Overview
    applyIf('#sec_overview textarea', DEFAULTS.phrases.goals, 0); // first textarea = goals
    // Strengths is second textarea
    const txts = document.querySelectorAll('#sec_overview textarea');
    if(txts[1]){ txts[1].value=DEFAULTS.phrases.strengths; txts[1].classList.add('suggested'); txts[1].dataset.edited=""; setState(txts[1]); }
    // Support row
    const row = document.querySelector('#tbl_supports tr');
    if(row){
      row.children[1].querySelector('input').value=DEFAULTS.phrases.supportRow.item;
      row.children[2].querySelector('input').value=DEFAULTS.phrases.supportRow.outcome;
      row.children[3].querySelector('input').value=DEFAULTS.phrases.supportRow.provider;
      row.children[4].querySelector('input').value=DEFAULTS.phrases.supportRow.freq;
      row.children[5].querySelector('input').value=DEFAULTS.phrases.supportRow.budget;
      row.querySelectorAll('input').forEach(i=>{i.classList.add('suggested'); i.dataset.edited=""; setState(i);});
    }
    // Risk
    applyIf('#sec_risk textarea', DEFAULTS.phrases.risk, 0);
    const risk2 = document.querySelectorAll('#sec_risk textarea')[1];
    if(risk2){ risk2.value=DEFAULTS.phrases.adjustments; risk2.classList.add('suggested'); risk2.dataset.edited=""; setState(risk2); }
    // Authorised person
    const auth = document.querySelector('#sec_review input[value="HD HeeD Pty Ltd"]');
    if(auth){ auth.classList.add('suggested'); auth.dataset.edited=""; setState(auth); }
    function applyIf(sel,val,idx){
      const els = document.querySelectorAll(sel);
      const el = (typeof idx==='number')? els[idx] : els[0];
      if(!el) return;
      el.value = val; el.classList.add('suggested'); el.dataset.edited=""; setState(el);
    }
  }
  document.getElementById('applyDefaults')?.addEventListener('click', applyDefaults);
  document.getElementById('applyDefaults2')?.addEventListener('click', applyDefaults);

  // Add row helper
  function addRow(tblId){
    const body = document.getElementById(tblId).querySelector('tbody');
    const tr = document.createElement('tr');
    const idx = body.querySelectorAll('tr').length + 1;
    tr.innerHTML = `
      <td>${idx}</td>
      <td><input class="req" list="dl_supports" placeholder="Support item / category"></td>
      <td><input class="req" placeholder="Goal link"></td>
      <td><input class="req" placeholder="Provider(s)"></td>
      <td><input class="req" placeholder="Frequency / volume"></td>
      <td><input class="req" placeholder="Budget"></td>
    `;
    body.appendChild(tr);
    tr.querySelectorAll('input').forEach(el=>{ bind(el); setState(el); });
  }

  // Ensure logo loads before print
  window.addEventListener('beforeprint', ()=>{ const img=document.querySelector('header.hero img'); if(img?.decode){ try{img.decode();}catch(e){} } });
</script>
</body>
</html>
